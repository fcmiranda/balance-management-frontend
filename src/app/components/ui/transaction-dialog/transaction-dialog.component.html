<div class="transaction-dialog" style="max-width: 500px; width: 100%;">
    <!-- Dialog Header -->
    <div class="dialog-header">
        <h2 mat-dialog-title class="text-xl font-bold text-gray-800 mb-2">
            {{ data.title }}
        </h2>
        <p class="text-gray-600 mb-0">{{ data.message }}</p>
    </div>

    <!-- Dialog Content -->
    <div mat-dialog-content class="py-4">
        <form [formGroup]="transactionForm" class="space-y-6">
            <!-- Amount -->
            <mat-form-field appearance="outline" class="w-full">
                <mat-label>Valor</mat-label>
                <input matInput type="number" formControlName="amount" placeholder="0,00" step="0.01" min="0.01"
                    (input)="formatDecimal($event)"
                    [class.mat-form-field-invalid]="transactionForm.get('amount')?.invalid && transactionForm.get('amount')?.touched">
                <span matPrefix>R$&nbsp;</span>
                <mat-icon matSuffix>{{ data.type === 'deposit' ? 'add' : 'payments' }}</mat-icon>
                <mat-error *ngIf="transactionForm.get('amount')?.hasError('required')">
                    Valor é obrigatório
                </mat-error>
                <mat-error *ngIf="transactionForm.get('amount')?.hasError('min')">
                    Valor deve ser pelo menos R$ 0,01
                </mat-error>
                <mat-error *ngIf="transactionForm.get('amount')?.hasError('maxDecimalPlaces')">
                    Valor não pode ter mais de 2 casas decimais
                </mat-error>
            </mat-form-field>
        </form>
    </div>

    <!-- Dialog Actions -->
    <div mat-dialog-actions class="flex gap-3 justify-end p-6 border-t border-gray-200">
        <button mat-button type="button" (click)="onCancel()" [disabled]="loading" class="px-6 py-2">
            Cancel
        </button>

        <button mat-raised-button [color]="data.type === 'deposit' ? 'primary' : 'warn'" type="button"
            (click)="onSubmit()" [disabled]="transactionForm.invalid || loading" class="px-6 py-2">
            @if (loading) {
            <mat-spinner diameter="16" class="mr-2"></mat-spinner>
            }
            {{ loading ? 'Processing...' : (data.type === 'deposit' ? 'Deposit Funds' : 'Withdraw Funds') }}
        </button>
    </div>
</div>